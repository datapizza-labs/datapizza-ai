# üîß VS Code Integration con GitHub Copilot

## Il Problema Risolto
MOOD Dev Agent genera ottime proposte e analisi, ma poi devi:
1. Creare manualmente la struttura cartelle
2. Scrivere boilerplate code
3. Configurare VS Code
4. Impostare build/run tasks
5. Perdere tempo con setup

**Soluzione**: Genera progetti **pronti all'uso** in 1 click!

---

## Come Funziona

### Dal Dashboard
```
Tab "MOOD Developer Agent"
   ‚Üì
Esegui: "Propose Feature" o "Implement Integration"
   ‚Üì
Click: "üöÄ Genera Progetto VS Code"
   ‚Üì
   Progetto completo generato in outputs/projects/
   ‚Üì
Click: "üìù Apri in VS Code"
   ‚Üì
   VS Code si apre con progetto pronto!
```

### Cosa Genera

1. **üìÇ Struttura Completa**
   ```
   mio_progetto/
   ‚îú‚îÄ‚îÄ main.py              # Codice principale con TODO
   ‚îú‚îÄ‚îÄ utils.py             # Moduli helper
   ‚îú‚îÄ‚îÄ requirements.txt     # Dipendenze
   ‚îú‚îÄ‚îÄ README.md            # Documentazione
   ‚îú‚îÄ‚îÄ IMPLEMENTATION.md    # Guida step-by-step
   ‚îú‚îÄ‚îÄ .copilot-instructions.md  # Hints per Copilot
   ‚îî‚îÄ‚îÄ .vscode/
       ‚îú‚îÄ‚îÄ tasks.json       # Build/Run automatici
       ‚îú‚îÄ‚îÄ launch.json      # Debug config
       ‚îî‚îÄ‚îÄ settings.json    # Copilot enabled
   ```

2. **üíª Codice Boilerplate**
   ```python
   # main.py (esempio)
   """
   OSC MIDI Bridge
   Generated by MOOD Dev Agent
   """
   
   from pythonosc import udp_client
   import mido
   
   # TODO: [Copilot] Configure OSC client connection
   # The client should connect to localhost:7000 by default
   # Add error handling for connection failures
   osc_client = None  # Your implementation here
   
   # TODO: [Copilot] Implement MIDI input handler
   # Listen to MIDI port and convert messages to OSC
   # Map MIDI CC values (0-127) to OSC floats (0.0-1.0)
   def midi_to_osc(midi_msg):
       pass  # Your implementation here
   ```

3. **ü§ñ Copilot Instructions**
   - Contesto del progetto
   - Librerie da usare
   - Pattern architetturali
   - Hints specifici per ogni TODO

4. **‚öôÔ∏è VS Code Config**
   - Tasks per run/build/test (Cmd+Shift+B)
   - Debug configuration
   - Copilot abilitato e configurato
   - Extensions consigliate

---

## Esempio Workflow Completo

### Scenario: Dev Agent propone "OSC-MIDI Bridge"

**1. Nel Dashboard:**
```
Tab MOOD Dev Agent ‚Üí Propose Feature
Feature: "Bridge between OSC and MIDI for lighting control"
Target: "live performers"
Click "Esegui" ‚Üí Agent genera proposta dettagliata
Click "üöÄ Genera Progetto VS Code"
```

**2. Sistema Genera:**
- Analizza proposta con Gemini
- Determina best tech stack (Python + python-osc + mido)
- Genera 5 file Python con TODO
- Crea VS Code config
- Output: `outputs/projects/osc_midi_bridge/`

**3. Apri in VS Code:**
```bash
code outputs/projects/osc_midi_bridge/
```

**4. Implementa con Copilot:**
- Leggi `.copilot-instructions.md` (30 sec)
- Apri `main.py`
- Vai al primo TODO
- Copilot suggerisce implementazione (basato su instructions)
- Tab ‚Üí Accept
- Ripeti per ogni TODO (~15 min)

**5. Run & Test:**
```bash
Cmd+Shift+B  # Build task
# oppure
python main.py
```

**Tempo totale: ~20 minuti** vs 2-3 ore manualmente! üéØ

---

## Tecnologia

### LLM Analysis
```python
Proposta Dev Agent 
   ‚Üì
Gemini 2.0 Flash analizza
   ‚Üì
Determina:
- Linguaggio (Python/JS/etc)
- Architettura (script/MVC/microservices)
- File necessari
- Dipendenze
- Test strategy
```

### Code Generation
```python
Per ogni file:
   ‚Üì
Gemini genera:
- Boilerplate completo
- TODO con hint dettagliati
- Docstrings esplicative
- Import corretti
- Struttura pronta
```

### VS Code Integration
```json
.vscode/tasks.json:
{
  "tasks": [
    {
      "label": "Run Project",
      "type": "shell",
      "command": "python main.py",
      "group": {"kind": "build", "isDefault": true}
    }
  ]
}
```

---

## TODO Intelligenti per Copilot

### Bad TODO (generico):
```python
# TODO: Implement function
```

### Good TODO (specifico):
```python
# TODO: [Copilot] Implement OSC message handler
# Should listen on port 7000 for /light/brightness messages
# Extract value from OSC (float 0.0-1.0) and convert to MIDI CC (0-127)
# Send to MIDI port "MOOD Controller" channel 1, CC 1
# Add error handling for invalid values and connection losses
```

**Copilot capisce il contesto e genera codice accurato!**

---

## File Generati

### `.copilot-instructions.md`
```markdown
# GitHub Copilot Instructions

## Project Context
Bridge between OSC protocol and MIDI...

## Key Technologies
- python-osc: For OSC communication
- mido: For MIDI I/O
- asyncio: For concurrent handling

## Implementation Guidelines
- Use UDP for OSC (port 7000 default)
- Map OSC float (0.0-1.0) to MIDI int (0-127)
- Handle connection errors gracefully
...
```

### `IMPLEMENTATION.md`
```markdown
# Implementation Guide

## Step-by-Step (30 minutes)

### Phase 1: Setup (5 min)
1. Open in VS Code: `code .`
2. Install extensions: GitHub Copilot, Python
3. Install deps: `pip install -r requirements.txt`

### Phase 2: Implementation (20 min)
1. Read `.copilot-instructions.md`
2. Open `main.py`
3. Find TODO #1: Configure OSC client
   - Position cursor after TODO
   - Copilot suggests implementation
   - Press Tab to accept
4. Repeat for all TODOs
5. Test after each TODO

### Phase 3: Testing (5 min)
1. Run: `Cmd+Shift+B`
2. Test with OSC sender (TouchOSC/etc)
3. Verify MIDI output
...
```

---

## Azioni Supportate

| Dev Agent Action | Genera Progetto? | Note |
|------------------|------------------|------|
| Propose Feature | ‚úÖ | Ideal! |
| Implement Software Integration | ‚úÖ | Con protocollo |
| Implement Hardware Integration | ‚úÖ | Con hardware spec |
| Create Demo | ‚úÖ | Demo ready |
| Weekly Innovation Sprint | ‚ùå | Troppo generico |
| Monitor Events | ‚ùå | Info only |
| Analyze Technology | ‚ö†Ô∏è | Opzionale |
| Code Review | ‚ùå | Review existing |
| Update Documentation | ‚ùå | Docs only |

---

## Customization

### Personalizza Template
Modifica `tools/vscode_integration.py`:

```python
def _generate_code_file(...):
    # Aggiungi il tuo stile di codice
    # Personalizza TODO format
    # Cambia naming conventions
```

### Cambia LLM
```python
# Usa modello diverso per code generation
model='gemini-2.0-flash-exp'  # Default
# oppure
model='gemini-1.5-pro'  # Pi√π accurato ma lento
```

### Output Directory
```python
generator = VSCodeProjectGenerator(
    workspace_root="~/my_projects"  # Custom path
)
```

---

## Tips & Best Practices

### üí° Ottimizza Proposte Dev Agent
Per progetti migliori, nel prompt includi:
- **Tecnologia specifica**: "using python-osc and mido"
- **Constraints**: "must work on Raspberry Pi"
- **Target platform**: "for TouchDesigner integration"

### üéØ Usa Copilot Efficacemente
1. **Leggi sempre `.copilot-instructions.md` prima**
2. **Implementa TODO nell'ordine** (hanno dipendenze)
3. **Testa dopo ogni TODO** (non alla fine)
4. **Chiedi a Copilot Chat** se qualcosa non √® chiaro

### ‚ö†Ô∏è Attenzione
- **Review il codice generato** (Copilot pu√≤ sbagliare)
- **Testa con dati reali** prima di production
- **Aggiungi test** se mancanti
- **Documenta modifiche** manuali

---

## Roadmap

### ‚úÖ Fase 1 (Completata)
- Generazione progetti Python
- VS Code config (tasks, launch, settings)
- Copilot instructions
- Implementation guide

### üîÑ Fase 2 (In Corso)
- Support JavaScript/TypeScript
- Test file generation
- Docker config
- CI/CD templates

### üîú Fase 3 (Futuro)
- ML model training templates
- Hardware pinout diagrams
- Auto-deploy scripts
- Video tutorial generation

---

## FAQ

**Q: Posso editare i file generati?**  
A: S√¨! Sono il tuo punto di partenza. Modifica liberamente.

**Q: Funziona senza Copilot?**  
A: S√¨, ma i TODO richiedono implementazione manuale (pi√π tempo).

**Q: Posso rigenerare un progetto?**  
A: S√¨, verr√† creata una nuova cartella. I vecchi non vengono sovrascritti.

**Q: Il codice generato √® production-ready?**  
A: No, √® boilerplate + TODO. Copilot aiuta ma serve review umano.

**Q: Posso usare con altri IDE?**  
A: S√¨, ma config `.vscode/` √® specifica. Adatta tasks per il tuo IDE.

---

**Autore**: Antonio Mainenti  
**Data**: 29 Ottobre 2025  
**Integrato con**: MOOD Dev Agent + GitHub Copilot
